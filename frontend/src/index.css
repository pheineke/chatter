@tailwind base;
@tailwind components;
@tailwind utilities;

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background-color: #1a1a1e;
  color: #f2f3f5;
  overflow: hidden;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: #111214;
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: #0b0c0e;
}

/* Avatar ring: swap to hover color when parent row is hovered */
[data-avatar-ring]:hover {
  --avatar-ring: var(--avatar-ring-hover);
}

/* Mention highlight inside messages */
.mention {
  @apply bg-discord-mention/20 text-discord-mention rounded px-0.5 cursor-pointer;
}
.mention:hover {
  @apply bg-discord-mention/40;
}

/* Reusable button */
.btn {
  @apply px-4 py-2 rounded bg-discord-mention text-white font-semibold text-sm
         hover:bg-indigo-500 active:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed
         transition-colors;
}
.btn-ghost {
  @apply bg-discord-input text-discord-text hover:bg-discord-input/80;
}

/* Reusable text input */
.input {
  @apply bg-discord-bg rounded px-3 py-2 text-sm text-discord-text
         placeholder:text-discord-muted outline-none border border-transparent
         focus:border-discord-mention transition-colors;
}

/* Hide scrollbar but keep scroll */
.scrollbar-none {
  scrollbar-width: none;
}
.scrollbar-none::-webkit-scrollbar {
  display: none;
}

/* ── Discord-flavoured markdown ─────────────────────────────────────────── */
.discord-markdown {
  @apply text-sm text-discord-text break-words leading-relaxed;
}
.discord-markdown p {
  @apply m-0;
}
.discord-markdown p + p {
  @apply mt-1;
}
.discord-markdown strong, .discord-markdown b {
  @apply font-bold text-white;
}
.discord-markdown em, .discord-markdown i {
  @apply italic;
}
.discord-markdown del, .discord-markdown s {
  @apply line-through;
}
.discord-markdown code {
  @apply bg-black/40 text-discord-text rounded px-1 py-0.5 text-[13px] font-mono;
}
.discord-markdown pre {
  @apply bg-black/40 rounded p-3 my-1 overflow-x-auto relative;
}
.discord-markdown pre code {
  @apply bg-transparent p-0;
}

/* Code block copy button */
.code-copy-btn {
  @apply absolute top-2 right-2 w-7 h-7 flex items-center justify-center
         rounded bg-white/5 text-discord-muted opacity-0
         hover:bg-white/10 hover:text-discord-text
         transition-all cursor-pointer border-none;
}
.discord-markdown pre:hover .code-copy-btn {
  @apply opacity-100;
}
.code-copy-btn.copied {
  @apply opacity-100 text-green-400;
}
.code-copy-icon {
  @apply block w-4 h-4 bg-current;
  mask-size: contain;
  mask-repeat: no-repeat;
  mask-position: center;
  -webkit-mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
}
.discord-markdown blockquote {
  @apply border-l-4 border-discord-muted/50 pl-3 my-1 text-discord-muted;
}
.discord-markdown ul {
  @apply list-disc pl-5 my-1;
}
.discord-markdown ol {
  @apply list-decimal pl-5 my-1;
}
.discord-markdown li {
  @apply my-0.5;
}
/* External link */
.md-link {
  @apply text-discord-mention underline hover:text-indigo-300 transition-colors;
}
/* Spoiler */
.spoiler {
  @apply bg-discord-muted/30 text-transparent rounded cursor-pointer select-none px-0.5
         transition-colors;
}
.spoiler.revealed {
  @apply bg-discord-muted/20 text-discord-text;
}

/* Reply jump highlight */
@keyframes highlight-flash {
  0%   { background-color: rgba(88, 101, 242, 0.25); }
  80%  { background-color: rgba(88, 101, 242, 0.10); }
  100% { background-color: transparent; }
}
.highlight-flash {
  animation: highlight-flash 1.5s ease-out forwards;
}
